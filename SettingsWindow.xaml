<Window x:Class="AudioTranscriber.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:AudioTranscriber.ViewModels"
        mc:Ignorable="d"
        Title="è®¾ç½® - è¯­éŸ³è½¬å†™å§¬" 
        Height="600" Width="450"
        MinHeight="500" MinWidth="400"
        WindowStartupLocation="CenterOwner"
        Background="#FF1E1E2E"
        ResizeMode="CanResize"
        FontFamily="Microsoft YaHei, SimHei, sans-serif">
    
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- è®¾ç½®æ ‡é¢˜æ  -->
        <Border Grid.Row="0" 
                Background="#FF2D2D44" 
                Padding="20,15">
            <Grid>
                <TextBlock Text="âš™ï¸ è®¾ç½®" 
                          FontSize="20" 
                          FontWeight="Bold"
                          Foreground="White"
                          VerticalAlignment="Center"/>
            </Grid>
        </Border>
        
        <!-- è®¾ç½®å†…å®¹ -->
        <ScrollViewer Grid.Row="1" 
                     VerticalScrollBarVisibility="Auto"
                     Margin="20"
                     CanContentScroll="False"
                     PanningMode="Both">
            <StackPanel>
                <!-- éŸ³é¢‘æº -->
                <TextBlock Text="ðŸŽ§ éŸ³é¢‘æº" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                <ComboBox ItemsSource="{Binding AudioDevices}"
                         SelectedItem="{Binding SelectedDevice}"
                         DisplayMemberPath="Name"
                         Background="#22FFFFFF"
                         Foreground="Black"
                         BorderBrush="#44FFFFFF"
                         Padding="8,5"
                         Margin="0,0,0,15"/>
                
                <!-- ç¿»è¯‘æœåŠ¡ -->
                <TextBlock Text="ðŸŒ ç¿»è¯‘æœåŠ¡" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                <ComboBox ItemsSource="{Binding TranslationProviders}"
                         SelectedItem="{Binding SelectedTranslationProvider}"
                         DisplayMemberPath="Name"
                         Background="#22FFFFFF"
                         Foreground="Black"
                         BorderBrush="#44FFFFFF"
                         Padding="8,5"
                         Margin="0,0,0,5"/>
                <Button Content="ðŸ”„ åˆ·æ–°Ollamaæ¨¡åž‹"
                       Command="{Binding RefreshOllamaModelsCommand}"
                       Background="#33FFFFFF"
                       Foreground="White"
                       BorderThickness="0"
                       Padding="8,5"
                       Margin="0,0,0,15"
                       HorizontalAlignment="Left"/>
                
                <!-- å­—å¹•æ ·å¼ -->
                <TextBlock Text="ðŸŽ¨ å­—å¹•æ ·å¼" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,10"/>
                
                <!-- å­—ä½“å¤§å° -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="40"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="å­—ä½“å¤§å°:" Foreground="#FFCCCCCC" Grid.Column="0" VerticalAlignment="Center"/>
                    <Slider Grid.Column="1" 
                           Minimum="12" Maximum="48" 
                           Value="{Binding FontSize}"
                           Margin="10,0"
                           VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding FontSize}" Foreground="White" Grid.Column="2" TextAlignment="Right"/>
                </Grid>
                
                <!-- é€æ˜Žåº¦ -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="50"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="èƒŒæ™¯é€æ˜Ž:" Foreground="#FFCCCCCC" Grid.Column="0" VerticalAlignment="Center"/>
                    <Slider Grid.Column="1" 
                           Minimum="0" Maximum="100" 
                           Value="{Binding BackgroundOpacity}"
                           Margin="10,0"
                           VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding BackgroundOpacity, StringFormat='{}{0}%'}" Foreground="White" Grid.Column="2" TextAlignment="Right"/>
                </Grid>
                
                <!-- èƒŒæ™¯é¢œè‰² -->
                <Grid Margin="0,0,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="èƒŒæ™¯é¢œè‰²:" Foreground="#FFCCCCCC" Grid.Column="0" VerticalAlignment="Center"/>
                    <ComboBox Grid.Column="1"
                             SelectedItem="{Binding SelectedBackgroundColor}"
                             Margin="10,0,0,0"
                             Background="#22FFFFFF"
                             Foreground="Black"
                             Padding="8,5">
                        <ComboBoxItem Content="é»‘è‰²" Tag="#000000"/>
                        <ComboBoxItem Content="æ·±è“" Tag="#1A1A2E"/>
                        <ComboBoxItem Content="æ·±ç´«" Tag="#2D1B4E"/>
                        <ComboBoxItem Content="æ·±ç»¿" Tag="#1B3A2E"/>
                        <ComboBoxItem Content="æ·±çº¢" Tag="#3A1B1B"/>
                        <ComboBoxItem Content="é€æ˜Ž" Tag="#000000"/>
                    </ComboBox>
                </Grid>
                
                <!-- åœ†è§’ -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="40"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="åœ†è§’å¤§å°:" Foreground="#FFCCCCCC" Grid.Column="0" VerticalAlignment="Center"/>
                    <Slider Grid.Column="1" 
                           Minimum="0" Maximum="50" 
                           Value="{Binding CornerRadius}"
                           Margin="10,0"
                           VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding CornerRadius}" Foreground="White" Grid.Column="2" TextAlignment="Right"/>
                </Grid>
                
                <!-- å…¶ä»–é€‰é¡¹ -->
                <CheckBox Content="å¯ç”¨ç¿»è¯‘" 
                         IsChecked="{Binding EnableTranslation}"
                         Foreground="White"
                         Margin="0,0,0,10"/>
                
                <CheckBox Content="è‡ªåŠ¨ä¿å­˜å­—å¹•" 
                         IsChecked="{Binding AutoSave}"
                         Foreground="White"
                         Margin="0,0,0,10"/>
                
                <!-- ä¿å­˜è·¯å¾„ -->
                <TextBlock Text="ðŸ“ ä¿å­˜è·¯å¾„:" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                <TextBlock Text="{Binding SaveDirectory}" 
                          Foreground="#FFCCCCCC"
                          FontSize="11"
                          TextTrimming="CharacterEllipsis"
                          Margin="0,0,0,5"/>
                <Button Content="æ›´æ”¹ä¿å­˜è·¯å¾„"
                       Command="{Binding ChangeSaveDirectoryCommand}"
                       Background="#33FFFFFF"
                       Foreground="White"
                       BorderThickness="0"
                       Padding="8,5"
                       HorizontalAlignment="Left"/>
            </StackPanel>
        </ScrollViewer>
        
        <!-- åº•éƒ¨æŒ‰é’®åŒºåŸŸ -->
        <Border Grid.Row="2" Background="#FF2D2D44" Padding="20,15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="ðŸ”´ å¼€å§‹å½•éŸ³"
                       Command="{Binding StartRecordingCommand}"
                       Background="#FFE53935"
                       Foreground="White"
                       BorderThickness="0"
                       Padding="20,10"
                       Margin="5,0"
                       FontWeight="Bold">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding CurrentState}" Value="Idle">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                
                <Button Content="â¹ï¸ åœæ­¢å½•éŸ³"
                       Command="{Binding StopRecordingCommand}"
                       Background="#FF757575"
                       Foreground="White"
                       BorderThickness="0"
                       Padding="20,10"
                       Margin="5,0"
                       FontWeight="Bold">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding CurrentState}" Value="Recording">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                
                <Button Content="ðŸ—‘ï¸ æ¸…ç©º"
                       Command="{Binding ClearTranscriptCommand}"
                       Background="#FF5C6BC0"
                       Foreground="White"
                       BorderThickness="0"
                       Padding="20,10"
                       Margin="5,0"
                       FontWeight="Bold"/>
                
                <Button Content="ðŸ’¾ ä¿å­˜"
                       Command="{Binding SaveTranscriptCommand}"
                       Background="#FF43A047"
                       Foreground="White"
                       BorderThickness="0"
                       Padding="20,10"
                       Margin="5,0"
                       FontWeight="Bold"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>